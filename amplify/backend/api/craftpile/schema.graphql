# This "input" configures a global authorization rule to enable public access to
# all models in this schema. Learn more about authorization rules here: https://docs.amplify.aws/cli/graphql/authorization-rules
#input AMPLIFY { globalAuthRule: AuthRule = { allow: public } } # FOR TESTING ONLY!

input addChildInput {
  name: String
  age: Int
}

input getPhotosForAlbumInput {
  albumId: ID
  limit: Int
  nextToken: String
  childId: String
}

input getAlbumsForChildInput {
  userId: ID
  limit: Int
  nextToken: String
}

input updatePhotoPropertiesInput {
  id: ID!
  dateOfPhoto: String
  title: String
  description: String
  childId: String
  albums: [String]
  tags: [String]
}

type NewPhotoResponse {
  id: ID!
  name: String
}

type Photo {
  _id: ID
  bucketName: String
  objectKey: String
  dateOfPhoto: String
  title: String
  description: String
  childId: String
  accountId: String
  albums: [String]
  tags: [String]
}

type Child {
  id: ID
  name: String
  age: Int
}

type Album {
  _id: ID
  name: String
  description: String
  childId: String
  posterImage: Photo
}

type User {
  _id: ID
  userId: String
  email: String
  accountId: String
  children: [Child]
}

type ChildAlbums {
  id: ID
  name: String
  albums: [Album]
}

type PhotosForAlbum {
  _id: ID
  name: String
  description: String
  childId: String
  photos: [Photo]
}

type Query {
  getPhotosForAlbum(input: getPhotosForAlbumInput): PhotosForAlbum
  @function(name: "craftpilePhotos-${env}")
  getUser: User
  @function(name: "craftpilePhotos-${env}")
  getChildrenAlbums: [ChildAlbums]
  @function(name: "craftpilePhotos-${env}")
}

type Mutation {
  updatePhotoProps(input: updatePhotoPropertiesInput): Photo
  @function(name: "craftpilePhotos-${env}")
  addChild(input: addChildInput): User
  @function(name: "craftpilePhotos-${env}")
}
