# This "input" configures a global authorization rule to enable public access to
# all models in this schema. Learn more about authorization rules here: https://docs.amplify.aws/cli/graphql/authorization-rules
#input AMPLIFY { globalAuthRule: AuthRule = { allow: public } } # FOR TESTING ONLY!

input addChildInput {
  name: String!
  age: Int
}

input deletePhotosInput {
  ids: [ID]!
}

input getPhotosForAlbumInput {
  albumId: ID
  limit: Int
  nextToken: String
  childId: String
}

input getAlbumsForChildInput {
  userId: ID!
  limit: Int
  nextToken: String
}

input updatePhotoPropertiesInput {
  id: ID!
  dateOfPhoto: String
  title: String
  description: String
  childId: String
  albums: [String]
  tags: [String]
}

input changePhotosChildInput {
  ids: [ID]!
  childId: String
}

type NewPhotoResponse {
  id: ID!
  name: String
}

type Photo {
  _id: ID
  bucketName: String!
  objectKey: String!
  thumbnailKey: String!
  localPath: String
  dateOfPhoto: String!
  title: String
  description: String
  childId: String!
  accountId: String!
  albums: [String!]
}

type Child {
  id: ID!
  name: String!
  age: Int
}

type Album {
  _id: ID
  name: String
  description: String
  childId: String
  posterImage: Photo
}

type User {
  _id: ID!
  userId: String!
  email: String!
  accountId: String!
  children: [Child]!
}

type ChildAlbums {
  id: ID!
  name: String!
  albums: [Album!]
}

type UnsortedPhoto {
  _id: ID!
  bucketName: String!
  objectKey: String!
  dateOfPhoto: String!
  childId: String!
  thumbnailKey: String!
  localPath: String
}
type UnsortedId {
  childId: String!
  name: String!
}
type ChildUnsortedPhotos {
  _id: UnsortedId!
  photos: [UnsortedPhoto]!
}

type PhotosForAlbum {
  _id: ID!
  name: String!
  description: String
  childId: String!
  photos: [Photo!]
}

type Query {
  getPhotosForAlbum(input: getPhotosForAlbumInput): PhotosForAlbum
  @function(name: "craftpilePhotos-${env}")
  getUser: User!
  @function(name: "craftpilePhotos-${env}")
  getChildrenAlbums: [ChildAlbums]
  @function(name: "craftpilePhotos-${env}")
  getChildrenUnsortedPhotos: [ChildUnsortedPhotos!]
  @function(name: "craftpilePhotos-${env}")
}

type Mutation {
#  TODO: add mutation for updating images childId
  updatePhotoProps(input: updatePhotoPropertiesInput): Photo
  @function(name: "craftpilePhotos-${env}")
  addChild(input: addChildInput): User!
  @function(name: "craftpilePhotos-${env}")
  deleteUnsortedPhotos(input: deletePhotosInput!): [ChildUnsortedPhotos!]
  @function(name: "craftpilePhotos-${env}")
}

