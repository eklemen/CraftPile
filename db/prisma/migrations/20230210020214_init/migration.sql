-- CreateTable
CREATE TABLE "account" (
    "id" UUID NOT NULL DEFAULT gen_random_uuid(),
    "created_at" TIMESTAMPTZ(6) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMPTZ(6) NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "PK_54115ee388cdb6d86bb4bf5b2ea" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "album" (
    "id" UUID NOT NULL DEFAULT gen_random_uuid(),
    "name" STRING NOT NULL,
    "description" STRING NOT NULL,
    "created_at" TIMESTAMPTZ(6) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMPTZ(6) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "child_id" UUID,
    "account_id" UUID,

    CONSTRAINT "PK_58e0b4b8a31bb897e6959fe3206" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "child" (
    "id" UUID NOT NULL DEFAULT gen_random_uuid(),
    "name" STRING NOT NULL,
    "date_of_birth" STRING NOT NULL,
    "created_at" TIMESTAMPTZ(6) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMPTZ(6) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "account_id" UUID,

    CONSTRAINT "PK_4609b9b323ca37c6bc435ec4b6b" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "migrations" (
    "id" INT8 NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    "timestamp" INT8 NOT NULL,
    "name" STRING NOT NULL,

    CONSTRAINT "PK_8c82d7f526340ab734260ea46be" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "photo" (
    "id" UUID NOT NULL DEFAULT gen_random_uuid(),
    "bucket_name" STRING NOT NULL,
    "object_key" STRING NOT NULL,
    "thumbnail_key" STRING NOT NULL,
    "description" STRING NOT NULL,
    "date_of_photo" TIMESTAMP(6) NOT NULL,
    "created_at" TIMESTAMPTZ(6) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMPTZ(6) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "child_id" UUID,
    "album_id" UUID,
    "account_id" UUID,

    CONSTRAINT "PK_723fa50bf70dcfd06fb5a44d4ff" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "user" (
    "id" UUID NOT NULL DEFAULT gen_random_uuid(),
    "email" STRING NOT NULL,
    "created_at" TIMESTAMPTZ(6) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMPTZ(6) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "account_id" UUID,

    CONSTRAINT "PK_cace4a159ff9f2512dd42373760" PRIMARY KEY ("id")
);

-- CreateIndex
CREATE INDEX "IDX_1bf2b7ed66a63f71b91d857109" ON "album"("child_id");

-- CreateIndex
CREATE INDEX "IDX_ea367410f387b9ad69f6605a5a" ON "album"("account_id");

-- CreateIndex
CREATE INDEX "IDX_39cd4ce66d0b0a7728e1226df9" ON "child"("account_id");

-- CreateIndex
CREATE INDEX "IDX_b5a8898edc58430004a66f6862" ON "photo"("account_id");

-- CreateIndex
CREATE INDEX "IDX_e20a7909d568260051f092f946" ON "photo"("child_id");

-- CreateIndex
CREATE INDEX "IDX_ffd437288f0decc45db033e648" ON "photo"("album_id");

-- CreateIndex
CREATE INDEX "IDX_6acfec7285fdf9f463462de3e9" ON "user"("account_id");

-- AddForeignKey
ALTER TABLE "album" ADD CONSTRAINT "FK_1bf2b7ed66a63f71b91d8571098" FOREIGN KEY ("child_id") REFERENCES "child"("id") ON DELETE NO ACTION ON UPDATE NO ACTION;

-- AddForeignKey
ALTER TABLE "album" ADD CONSTRAINT "FK_ea367410f387b9ad69f6605a5a5" FOREIGN KEY ("account_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION;

-- AddForeignKey
ALTER TABLE "child" ADD CONSTRAINT "FK_39cd4ce66d0b0a7728e1226df96" FOREIGN KEY ("account_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION;

-- AddForeignKey
ALTER TABLE "photo" ADD CONSTRAINT "FK_b5a8898edc58430004a66f68625" FOREIGN KEY ("account_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION;

-- AddForeignKey
ALTER TABLE "photo" ADD CONSTRAINT "FK_e20a7909d568260051f092f9461" FOREIGN KEY ("child_id") REFERENCES "child"("id") ON DELETE NO ACTION ON UPDATE NO ACTION;

-- AddForeignKey
ALTER TABLE "photo" ADD CONSTRAINT "FK_ffd437288f0decc45db033e648f" FOREIGN KEY ("album_id") REFERENCES "album"("id") ON DELETE NO ACTION ON UPDATE NO ACTION;

-- AddForeignKey
ALTER TABLE "user" ADD CONSTRAINT "FK_6acfec7285fdf9f463462de3e9f" FOREIGN KEY ("account_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION;
